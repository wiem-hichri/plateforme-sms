<div class="min-h-screen bg-gray-100 p-6 mt-16">
    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-8">
      <h2 class="text-2xl font-bold text-blue-600 mb-6">📨 Envoi de SMS</h2>
  
      <form class="space-y-6" (ngSubmit)="sendMessage()">
        <!-- Contact Selection -->
        <div>
          <label class="font-semibold">📱 Contact (optionnel)</label>
          <select [(ngModel)]="selectedContactId" name="contact" class="w-full mt-1 p-2 border rounded">
            <option [ngValue]="null">-- Aucun --</option>
            <option *ngFor="let contact of contacts" [ngValue]="contact.id">
              {{ contact.nom }} {{ contact.prenom }} - {{ contact.numero }}
            </option>
          </select>
        </div>
  
        <!-- Group Selection with Checkboxes -->
        <div>
          <label class="font-semibold">👥 Groupes</label>
          <div class="space-y-2 mt-2">
            <label *ngFor="let group of groups" class="flex items-center space-x-2">
              <input 
                type="checkbox" 
                [(ngModel)]="selectedGroupIds" 
                [value]="group.id" 
                class="h-5 w-5 border-gray-300 rounded"
              />
              <span class="text-gray-700">{{ group.nom }}</span>
            </label>
          </div>
        </div>
  
        <!-- Model Selection -->
        <div>
          <label class="font-semibold">📄 Modèle de Message</label>
          <select [(ngModel)]="selectedModelId" name="model" class="w-full mt-1 p-2 border rounded">
            <option *ngFor="let model of models" [ngValue]="model.id">{{ model.nom }}</option>
          </select>
        </div>
  
        <!-- Preview -->
        <div class="bg-gray-100 p-4 rounded border">
          <h3 class="font-bold mb-2 text-gray-700">📋 Récapitulatif</h3>
          <p><strong>Contact :</strong>
            <span *ngIf="selectedContact">{{ selectedContact.nom }} {{ selectedContact.prenom }} - {{ selectedContact.numero }}</span>
            <span *ngIf="!selectedContact">Aucun</span>
          </p>
          <p><strong>Groupes :</strong>
            <span *ngIf="selectedGroups.length > 0">
              <span *ngFor="let group of selectedGroups; let last = last">
                {{ group.nom }}<span *ngIf="!last">, </span>
              </span>
            </span>
            <span *ngIf="selectedGroups.length === 0">Aucun</span>
          </p>
          <p><strong>Message :</strong> <span class="italic text-gray-600">{{ selectedModel?.contenu }}</span></p>
        </div>
  
        <!-- Submit -->
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
          ✉️ Envoyer le SMS
        </button>
      </form>
    </div>
  </div>
  