<div class="min-h-screen flex flex-col items-center bg-gray-100 p-6 mt-16">
  <div class="w-full max-w-4xl bg-white shadow-lg rounded-lg p-8 mx-auto">
<div class="p-6 max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold mb-4">Générer et Envoyer un Message Confidentiel</h2>

  <!-- Selection Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <div>
      <label class="block text-sm font-medium mb-1">Sélectionner un groupe</label>
      <select
        class="w-full border rounded px-3 py-2"
        (change)="onGroupChange($event)"
      >
        <option value="" disabled selected>-- Choisir un groupe --</option>
        <option *ngFor="let group of groups" [value]="group.id">{{ group.nom }}</option>
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Sélectionner un modèle</label>
      <select
        class="w-full border rounded px-3 py-2"
        (change)="onModelChange($event)"
      >
        <option value="" disabled selected>-- Choisir un modèle --</option>
        <option *ngFor="let model of models" [value]="model.id">{{ model.nom }}</option>
      </select>
    </div>
  </div>

  <!-- File Upload -->
  <div class="mb-6">
    <label class="block text-sm font-medium mb-1">Importer un fichier Excel</label>
    <input
      type="file"
      (change)="onFileChange($event)"
      class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
      accept=".xlsx,.xls"
    />
  </div>

  <!-- Action Buttons -->
  <div class="flex gap-4 mb-6">
    <button
      class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded"
      (click)="generateMessages()"
    >
      Générer les messages
    </button>

    <button
      class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded"
      [disabled]="generatedMessages.length === 0"
      (click)="sendMessages()"
    >
      Envoyer les messages
    </button>
  </div>

  <!-- Preview Section -->
  <div *ngIf="generatedMessages.length > 0" class="mt-8">
    <h3 class="text-xl font-semibold mb-2">Messages générés :</h3>
    <div class="bg-gray-100 rounded p-4 max-h-64 overflow-y-auto space-y-2">
      <div *ngFor="let msg of generatedMessages" class="p-2 bg-white rounded shadow text-sm">
        {{ msg }}
      </div>
    </div>
  </div>
</div>
