<div class="modal-overlay">
  <div class="modal-card">
    <h3>Modifier un Contact</h3>
    <form #editContactForm="ngForm">
      <input type="text" [(ngModel)]="contact.matricule" name="matricule" placeholder="Matricule" disabled>

      <input type="text" [(ngModel)]="contact.nom" name="nom" placeholder="Nom" required>
      <div *ngIf="editContactForm.controls['nom']?.invalid && editContactForm.controls['nom']?.touched">
        <small *ngIf="editContactForm.controls['nom']?.errors?.['required']">Le nom est requis.</small>
      </div>

      <input type="text" [(ngModel)]="contact.prenom" name="prenom" placeholder="Prénom">

      <input type="text" [(ngModel)]="contact.telephone_personnel" name="telephone_personnel" placeholder="Téléphone Personnel" pattern="[0-9]{8}">
      <div *ngIf="editContactForm.controls['telephone_personnel']?.invalid && editContactForm.controls['telephone_personnel']?.touched">
        <small *ngIf="editContactForm.controls['telephone_personnel']?.errors?.['pattern']">Le numéro de téléphone est invalide.</small>
      </div>

      <input type="text" [(ngModel)]="contact.telephone_professionnel" name="telephone_professionnel" placeholder="Téléphone Professionnel" pattern="[0-9]{8}">
      <div *ngIf="editContactForm.controls['telephone_professionnel']?.invalid && editContactForm.controls['telephone_professionnel']?.touched">
        <small *ngIf="editContactForm.controls['telephone_professionnel']?.errors?.['pattern']">Le numéro de téléphone est invalide.</small>
      </div>

      <input type="text" [(ngModel)]="contact.cin" name="cin" placeholder="CIN" pattern="[0-9]{8}">
      <div *ngIf="editContactForm.controls['cin']?.invalid && editContactForm.controls['cin']?.touched">
        <small *ngIf="editContactForm.controls['cin']?.errors?.['pattern']">Le CIN est invalide.</small>
      </div>

      <input type="text" [(ngModel)]="contact.fonction" name="fonction" placeholder="Fonction" required>
      <div *ngIf="editContactForm.controls['fonction']?.invalid && editContactForm.controls['fonction']?.touched">
        <small *ngIf="editContactForm.controls['fonction']?.errors?.['required']">La fonction est requise.</small>
      </div>

      <select [(ngModel)]="contact.site" name="site" required>
        <option value="">-- Sélectionner un site --</option>
        <option *ngFor="let site of sites" [value]="site.site_name">
          {{ site.site_name }}
        </option>
      </select>
      

    

      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeDialog()">Annuler</button>
        <button type="button" class="submit-btn" (click)="saveContact()" [disabled]="editContactForm.invalid">Enregistrer</button>
      </div>
    </form>
  </div>
</div>
